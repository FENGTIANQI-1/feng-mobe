{"version":3,"sources":["webpack:///./src/views/goods/EquipEdit.vue?b92e","webpack:///src/views/goods/EquipEdit.vue","webpack:///./src/views/goods/EquipEdit.vue?0fce","webpack:///./src/views/goods/EquipEdit.vue","webpack:///./src/assets/javascript/mixins_upload.js","webpack:///./src/views/goods/EquipEdit.vue?43ce","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/api/goods.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","id","nativeOn","$event","type","indexOf","_k","keyCode","key","save","model","value","callback","$$v","$set","expression","uploadUrl","uploadHeaders","uploadSuccess","icon","on","staticRenderFns","component","computed","process","VUE_APP_BASE_API","localStorage","getItem","methods","res","data","url","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error","saveEquip","request","method","deleteEquip","params","updateEquip","getEquip","getEquipItem","fetchStoreTwo","saveStore","deleteStore","updateStore","getStore","fetchStoreItem"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,UAAU,CAACG,YAAY,YAAY,CAACH,EAAG,KAAK,CAACG,YAAY,SAAS,CAACP,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAK,KAAO,MAAM,QAAQN,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,WAAWK,SAAS,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQd,EAAIe,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcjB,EAAIkB,KAAKN,KAAUO,MAAM,CAACC,MAAOpB,EAAImB,MAAU,KAAEE,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAImB,MAAO,OAAQG,IAAME,WAAW,gBAAgBpB,EAAG,YAAY,CAACG,YAAY,kBAAkBD,MAAM,CAAC,OAASN,EAAIyB,UAAU,kBAAiB,EAAM,QAAUzB,EAAI0B,cAAc,aAAa1B,EAAI2B,gBAAgB,CAAE3B,EAAImB,MAAU,KAAEf,EAAG,MAAM,CAACG,YAAY,SAASD,MAAM,CAAC,IAAMN,EAAImB,MAAMS,QAAQxB,EAAG,IAAI,CAACG,YAAY,wCAAwCH,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWuB,GAAG,CAAC,MAAQ7B,EAAIkB,OAAO,CAAClB,EAAIQ,GAAG,SAAS,IAAI,IAAI,IAC/9BsB,EAAkB,G,0DCuBtB,GACE,KAAF,YACE,OAAF,SACE,MAAF,OACE,KAJF,WAKI,MAAJ,CACM,MAAN,CACQ,KAAR,GACQ,KAAR,MAIE,MAAF,CACI,OADJ,WAEA,QACQ,KAAR,gBAEQ,KAAR,cACQ,KAAR,iBAIE,QAtBF,WAuBI,KAAJ,yBAEE,QAAF,CAEI,KAFJ,WAEM,IAAN,OAAM,OAAN,yJACA,UADA,EACA,OADA,EACA,KACA,OAEA,EAJA,uBAKA,6BALA,6BAQA,EARA,uBASA,6BATA,8BAcA,EAdA,kCAeA,qCAfA,QAeA,EAfA,gDAiBA,gCAjBA,QAiBA,EAjBA,kBAoBA,YApBA,wBAqBA,wBArBA,2BAwBA,0BACA,mCAzBA,+CA4BI,aA9BJ,WA8BM,IAAN,OAAM,OAAN,4JACA,0BADA,OACA,EADA,OAEA,yBACA,yBAHA,gDC/EkW,I,wBCQ9VC,EAAY,eACd,EACAhC,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,6CCnBA,QACbC,SAAU,CAERP,UAFQ,WAGN,OAAOQ,6CAAYC,iBAAmB,kBAGxCR,cANQ,WAON,MAAO,CAAE,cAAiBS,aAAaC,QAAQ,UAAY,MAG/DC,QAAS,CAEPV,cAFO,SAEQW,GACbrC,KAAKkB,MAAMS,KAAOU,EAAIC,KAAKC,Q,oCCdjC,yBAAgkB,EAAG,G,4CCAnkB,IAAIC,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdC,IAAK,WACH,IACE,OAAOL,EAA0BM,KAAKpD,MAAMqD,MAAML,GAAQ,GAC1D,MAAOM,GACP,MAAO,Q,kCCjBf,sYAGO,SAASC,EAAWjB,GACzB,OAAOkB,eAAQ,CACbjB,IAAK,aACLkB,OAAQ,OACRnB,SAKG,SAASoB,EAAaC,GAC3B,OAAOH,eAAQ,CACbjB,IAAK,gBACLkB,OAAQ,SACRE,WAMG,SAASC,EAAatB,GAC3B,OAAOkB,eAAQ,CACbjB,IAAK,gBACLkB,OAAQ,MACRnB,SAKG,SAASuB,EAAUF,GACxB,OAAOH,eAAQ,CACbjB,IAAK,cACLkB,OAAQ,MACRE,WAKG,SAASG,EAAcH,GAC5B,OAAOH,eAAQ,CACbjB,IAAK,cACLkB,OAAQ,MACRE,WAKG,SAASI,EAAeJ,GAC7B,OAAOH,eAAQ,CACbjB,IAAK,cACLkB,OAAQ,MACRE,WAKG,SAASK,EAAW1B,GACzB,OAAOkB,eAAQ,CACbjB,IAAK,aACLkB,OAAQ,OACRnB,SAKG,SAAS2B,EAAaN,GAC3B,OAAOH,eAAQ,CACbjB,IAAK,gBACLkB,OAAQ,SACRE,WAKG,SAASO,EAAa5B,GAC3B,OAAOkB,eAAQ,CACbjB,IAAK,gBACLkB,OAAQ,MACRnB,SAKG,SAAS6B,EAAUR,GACxB,OAAOH,eAAQ,CACbjB,IAAK,cACLkB,OAAQ,MACRE,WAKG,SAASS,EAAgBT,GAC9B,OAAOH,eAAQ,CACbjB,IAAK,cACLkB,OAAQ,MACRE","file":"js/chunk-58406cf2.95ecbe25.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"equip-edit\"}},[_c('el-card',{staticClass:\"box-card\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"装备\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入装备名称\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)}},model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}}),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"show-file-list\":false,\"headers\":_vm.uploadHeaders,\"on-success\":_vm.uploadSuccess}},[(_vm.model.icon)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.icon}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"equip-edit\">\n    <el-card class=\"box-card\">\n      <h1 class=\"title\">{{ id ? '编辑' : '新建' }}装备</h1>\n      <el-input v-model=\"model.name\" placeholder=\"请输入装备名称\" @keydown.native.enter=\"save\"></el-input>\n      <el-upload\n        class=\"avatar-uploader\"\n        :action=\"uploadUrl\"\n        :show-file-list=\"false\"\n        :headers=\"uploadHeaders\"\n        :on-success=\"uploadSuccess\">\n        <img v-if=\"model.icon\" :src=\"model.icon\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <div class=\"save\">\n        <el-button type=\"primary\" @click=\"save\">保存</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { saveEquip, updateEquip, getEquipItem } from '@/api/goods' \n  import mixins_upload from '@/assets/javascript/mixins_upload'\n  export default {\n    name: 'EquipEdit',\n    mixins: [mixins_upload],\n    props: ['id'],\n    data () {\n      return {\n        model: {  // 装备的名字和图片\n          name: '',\n          icon: ''\n        }\n      }\n    },\n    watch: {\n      $route () {\n        if (this.id) {\n          this.getEquipItem()\n        } else {\n          this.model.name = ''\n          this.model.icon = ''\n        }\n      }\n    },\n    mounted () {\n      this.id && this.getEquipItem()\n    },\n    methods: {\n      // 保存分类\n      async save () {\n        const { name, icon } = this.model\n        const id = this.id\n        // 名字不能为空\n        if (!name) {   \n          this.$message.error('装备名称不能为空')\n          return\n        }\n        if (!icon) {\n          this.$message.error('请先上传装备图片')\n          return\n        }\n         //根据id判断是新建还是编辑\n        let res\n        if (id) {   \n          res = await updateEquip({ id, name, icon })\n        } else {\n          res = await saveEquip({ name, icon })\n        }\n        // 该装备已存在\n        if (res.status == 1) {\n          this.$message.error(res.msg)\n          return\n        }\n        this.$message.success(res.msg)\n        this.$router.push('/goods/equipList')\n      },\n      // 获取装备详情\n      async getEquipItem () {\n        const res = await getEquipItem({ id: this.id })\n        this.model.name = res.data.name\n        this.model.icon = res.data.icon\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"../../assets/stylus/variable.styl\"\n  #equip-edit\n    .box-card\n      width: 520px\n      box-shadow: none\n      .title, .el-input\n        margin-bottom: 30px\n      .title\n        font-size: $font-s\n      .el-input\n        width: 70% \n      .save\n        margin-top: 30px\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EquipEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EquipEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EquipEdit.vue?vue&type=template&id=04baf1eb&scoped=true&\"\nimport script from \"./EquipEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./EquipEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EquipEdit.vue?vue&type=style&index=0&id=04baf1eb&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04baf1eb\",\n  null\n  \n)\n\nexport default component.exports","export default {\n  computed: {\n    // 文件上传地址\n    uploadUrl () {\n      return process.env.VUE_APP_BASE_API + '/upload/images'\n    },\n    // 文件上传时的请求头\n    uploadHeaders () {\n      return { 'Authorization': localStorage.getItem('token') || '' }\n    }\n  },\n  methods: {\n     // 文件上传成功的回调函数\n    uploadSuccess (res) {\n      this.model.icon = res.data.url\n    }\n  }\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EquipEdit.vue?vue&type=style&index=0&id=04baf1eb&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EquipEdit.vue?vue&type=style&index=0&id=04baf1eb&lang=stylus&scoped=true&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","import request from '@/utils/request'\n\n// 添加装备\nexport function saveEquip (data) {\n  return request({\n    url: '/equip/add',\n    method: 'post',\n    data\n  })\n}\n\n// 删除装备\nexport function deleteEquip (params) {\n  return request({\n    url: '/equip/delete',\n    method: 'delete',\n    params\n  })\n}\n\n\n// 更新装备\nexport function updateEquip (data) {\n  return request({\n    url: '/equip/update',\n    method: 'put',\n    data\n  })\n}\n\n// 获取装备\nexport function getEquip (params) {\n  return request({\n    url: '/equip/list',\n    method: 'get',\n    params\n  })\n}\n\n// 获取装备详情\nexport function getEquipItem (params) {\n  return request({\n    url: '/equip/item',\n    method: 'get',\n    params\n  })\n}\n\n// -----获取铭文二级分类-----\nexport function fetchStoreTwo (params) {\n  return request({\n    url: '/store/cate',\n    method: 'get',\n    params\n  })\n}\n\n// 添加铭文\nexport function saveStore (data) {\n  return request({\n    url: '/store/add',\n    method: 'post',\n    data\n  })\n}\n\n// 删除铭文\nexport function deleteStore (params) {\n  return request({\n    url: '/store/delete',\n    method: 'delete',\n    params\n  })\n}\n\n// 更新铭文\nexport function updateStore (data) {\n  return request({\n    url: '/store/update',\n    method: 'put',\n    data\n  })\n}\n\n// 获取铭文\nexport function getStore (params) {\n  return request({\n    url: '/store/list',\n    method: 'get',\n    params\n  })\n}\n\n// 获取装备详情\nexport function fetchStoreItem (params) {\n  return request({\n    url: '/store/item',\n    method: 'get',\n    params\n  })\n}"],"sourceRoot":""}