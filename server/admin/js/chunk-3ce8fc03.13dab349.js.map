{"version":3,"sources":["webpack:///./src/views/system/UserEdit.vue?f8d5","webpack:///./src/views/system/UserEdit.vue?3fa2","webpack:///src/views/system/UserEdit.vue","webpack:///./src/views/system/UserEdit.vue?c908","webpack:///./src/views/system/UserEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","id","nativeOn","$event","type","indexOf","_k","keyCode","key","save","model","value","callback","$$v","$set","expression","on","staticRenderFns","component"],"mappings":"kHAAA,yBAA+jB,EAAG,G,2CCAlkB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,UAAU,CAACG,YAAY,YAAY,CAACH,EAAG,KAAK,CAACG,YAAY,SAAS,CAACP,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAK,KAAO,MAAM,SAASN,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,UAAUK,SAAS,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQd,EAAIe,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcjB,EAAIkB,KAAKN,KAAUO,MAAM,CAACC,MAAOpB,EAAImB,MAAc,SAAEE,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAImB,MAAO,WAAYG,IAAME,WAAW,oBAAoBpB,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,QAAQ,gBAAgB,IAAIK,SAAS,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQd,EAAIe,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcjB,EAAIkB,KAAKN,KAAUO,MAAM,CAACC,MAAOpB,EAAImB,MAAc,SAAEE,SAAS,SAAUC,GAAMtB,EAAIuB,KAAKvB,EAAImB,MAAO,WAAYG,IAAME,WAAW,oBAAoBpB,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQzB,EAAIkB,OAAO,CAAClB,EAAIQ,GAAG,SAAS,IAAI,IAAI,IACliCkB,EAAkB,G,oCCctB,GACE,KAAF,WACE,MAAF,OACE,KAHF,WAII,MAAJ,CACM,MAAN,CACQ,SAAR,GACQ,SAAR,MAIE,MAAF,CACI,OADJ,WAEA,QACQ,KAAR,eAEQ,KAAR,kBACQ,KAAR,qBAIE,QArBF,WAsBI,KAAJ,wBAEE,QAAF,CAEI,KAFJ,WAEM,IAAN,OAAM,OAAN,yJACA,UADA,EACA,WADA,EACA,SACA,OAEA,EAJA,uBAKA,4BALA,6BAQA,EARA,uBASA,2BATA,8BAcA,EAdA,kCAeA,6CAfA,QAeA,EAfA,gDAiBA,wCAjBA,QAiBA,EAjBA,kBAoBA,YApBA,wBAqBA,wBArBA,2BAwBA,0BACA,mCAzBA,+CA4BI,YA9BJ,WA8BM,IAAN,OAAM,OAAN,qKAGA,0BAHA,OAGA,EAHA,0DAKA,mCACA,oBANA,QAQA,iCACA,oBATA,8DCrEiW,I,wBCQ7VC,EAAY,eACd,EACA5B,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-3ce8fc03.13dab349.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=0f11ac0c&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=0f11ac0c&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-edit\"}},[_c('el-card',{staticClass:\"box-card\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"管理员\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)}},model:{value:(_vm.model.username),callback:function ($$v) {_vm.$set(_vm.model, \"username\", $$v)},expression:\"model.username\"}}),_c('el-input',{attrs:{\"placeholder\":\"请输入密码\",\"show-password\":\"\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)}},model:{value:(_vm.model.password),callback:function ($$v) {_vm.$set(_vm.model, \"password\", $$v)},expression:\"model.password\"}}),_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"user-edit\">\n    <el-card class=\"box-card\">\n      <h1 class=\"title\">{{ id ? '编辑' : '新建' }}管理员</h1>\n      <el-input v-model=\"model.username\" placeholder=\"请输入用户名\" @keydown.native.enter=\"save\"></el-input>\n      <el-input placeholder=\"请输入密码\" v-model=\"model.password\" @keydown.native.enter=\"save\" show-password></el-input>\n      <div class=\"save\">\n        <el-button type=\"primary\" @click=\"save\">保存</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { saveUser, updateUser, fetchUserItem } from '@/api/user'\n  export default {\n    name: 'UserEdit',\n    props: ['id'],\n    data () {\n      return {\n        model: {\n          username: '',\n          password: ''\n        }\n      }\n    },\n    watch: {\n      $route () {\n        if (this.id) {\n          this.getUserItem()\n        } else {\n          this.model.username = ''\n          this.model.password = ''\n        }\n      }\n    },\n    mounted () {\n      this.id && this.getUserItem()\n    },    \n    methods: {\n      // 保存管理员\n      async save () {\n        const { username, password } = this.model\n        const id = this.id\n        // 名字不能为空\n        if (!username) {   \n          this.$message.error('用户名不能为空')\n          return\n        }\n        if (!password) {\n          this.$message.error('密码不能为空')\n          return\n        }\n         //根据id判断是新建还是编辑\n        let res\n        if (id) {   \n          res = await updateUser({ id, username, password })\n        } else {\n          res = await saveUser({ username, password })\n        }\n        // 该管理员已存在\n        if (res.status == 1) {\n          this.$message.error(res.msg)\n          return\n        }\n        this.$message.success(res.msg)\n        this.$router.push('/system/userList')\n      },\n      // 获取管理员详情\n      async getUserItem () {\n        let res\n        try {\n          res = await fetchUserItem({ id: this.id })\n        } catch (err) {\n          this.model.username = 'user-find-error'\n          this.model.password = ''\n        }\n        this.model.username = res.data.username\n        this.model.password = ''\n      }      \n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"../../assets/stylus/variable.styl\"\n  #user-edit\n    .box-card\n      width: 520px\n      box-shadow: none\n      .title, .el-input\n        margin-bottom: 30px\n      .title\n        font-size: $font-s\n      .el-input\n        width: 70% \n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEdit.vue?vue&type=template&id=0f11ac0c&scoped=true&\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserEdit.vue?vue&type=style&index=0&id=0f11ac0c&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f11ac0c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}